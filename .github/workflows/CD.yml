name: CD

on:
  push:
    tags: 'v*'

jobs:     
  release-linux:
    uses: Geode-solutions/actions/.github/workflows/cd-linux.yml@master
    with:
      name: OPENGEODE_GEOSCIENCESIO
      repos: OpenGeode;OpenGeode-IO;OpenGeode-Geosciences
    secrets: inherit

  release-linux-python:
    uses: Geode-solutions/actions/.github/workflows/cd-linux-python.yml@master
    with:
      name: OPENGEODE_GEOSCIENCESIO
      repos: OpenGeode;OpenGeode-IO;OpenGeode-Geosciences
    secrets: inherit

  release-windows:
    uses: Geode-solutions/actions/.github/workflows/cd-windows.yml@master
    with:
      name: OPENGEODE_GEOSCIENCESIO
      repos: OpenGeode;OpenGeode-IO;OpenGeode-Geosciences
      config: RelWithDebInfo
    secrets: inherit

  release-windows-python:
    uses: Geode-solutions/actions/.github/workflows/cd-windows-python.yml@master
    with:
      name: OPENGEODE_GEOSCIENCESIO
      repos: OpenGeode;OpenGeode-IO;OpenGeode-Geosciences
    secrets: inherit

  notify:
    uses: Geode-solutions/actions/.github/workflows/end-cd.yml@master
    needs: [release-linux, release-linux-python, release-windows, release-windows-python]
    secrets: inherit
